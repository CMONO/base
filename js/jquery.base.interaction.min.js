((function(){var a,b,c,d,e,f,g,h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=window.jQuery,b=window.BASE,c=function(){function c(d,e){var f;f=this,f.jqObj=d,f.opts={},a.extend(f.opts,c.prototype.defaults,e),f.opts.widgetKey=b.getRandomKey()}return c.name="Interaction",c.prototype.defaults={disable:!1,getUserMask:null,originMask:!1,stopMouseDownPropagation:!1,start:!1,originClientX:0,originClientY:0,doing:!1,type:null,mask:null,event:{start:a.noop,doing:a.noop,stop:a.noop},maskHTML:'<div class="uiInteractionMask uiInactive uiCornerAll uiBlackBigBorder"></div>'},c.prototype.init=function(){var b,c,h,i,j,k,l,m;return b=this,m=b.jqObj,l=b.opts,c=m.off?"on":"bind",console.log(l.type),l.type==="resize"?(k=m.find(".uiResizable"),k.length===0&&(m.css(!1)&&m.css("position","relative"),k=a('<div class="uiResizable"></div>').appendTo(m))):l.type==="drag"&&(k=m.find(".uiDraggable"),k.length===0&&(k=m.addClass("uiDraggable"))),h="mousedown."+l.type,console.log(k),k[c](h,function(a){return g(m,l,a),l.type==="resize"?!1:!l.stopMouseDownPropagation}),i="mousemove."+l.widgetKey,j="mouseup."+l.widgetKey,a(document)[c](i,function(a){var b,c,e,g,h,i;if(l.start){if(l.mask===null&&f(m,l,a)===!1)return;b=l.mask,console.log("mousemove"),l.doing=!0,g=a.clientX-l.originClientX,h=a.clientY-l.originClientY;if(l.type==="resize"){e=l.originWidth+g,c=l.originHeight+h,l.maxWidth!==null&&e>l.maxWidth&&(e=l.maxWidth),l.minWidth!==null&&e<l.minWidth&&(e=l.minWidth),l.maxHeight!==null&&c>l.maxHeight&&(c=l.maxHeight),l.minHeight!==null&&c<l.minHeight&&(c=l.minHeight);if(l.event.doing(m,b,e,c)===!1)return;b.width(e).height(c)}else if(l.type==="drag"){i={left:l.originPosition.left+g,top:l.originPosition.top+h};if(l.event.doing(m,b,i)===!1)return;b.css(i),l.dest!==null&&(d(l,i,l.destPosition)===!0?l.firstCross||(l.cross(m,!0),l.firstCross=!0):l.firstCross&&(l.cross(m,!1),l.firstCross=!1))}return!1}}),a(document)[c](j,function(){return e(m,l)}),b},c}(),e=function(a,b){var c,d;if(b.doing===!1){b.start=!1;return}c=b.mask,b.start=b.doing=!1;if(b.type==="resize"){if(b.event.stop(a,c,c.width(),c.height())===!1)return}else if(b.type==="drag"){d=c.offset();if(b.event.stop(a,c,d)===!1)return}return c.remove(),b.mask=null},g=function(b,c,d){c.start=!0;if(c.event.start(b)===!1||a(d.target).hasClass("uiUserBtn"))return c.start=!1,!1},f=function(b,c,d){var e,f,g,h,i,j;h=b.outerHeight(),j=b.outerWidth(),i=b.offset(),c.originClientX=d.clientX,c.originClientY=d.clientY,c.outerHeight=h,c.outerWidth=j,c.originWidth=b.width(),c.originHeight=b.height(),c.originPosition=c.position=i;if(a.isFunction(c.getUserMask)){c.mask=c.getUserMask(b);if(c.mask.length===0)return c.mask=null,c.start=!1,!1;c.position=c.originPosition=c.mask.offset()}else c.originMask?c.mask=b.clone().css({position:"absolute",left:i.left,top:i.top}).appendTo("body"):(f=b.css("marginLeft"),g=b.css("marginTop"),c.mask=a(c.maskHTML).width(j).height(h).css({marginLeft:f,marginTop:g,left:i.left,top:i.top}).hide().addClass("uiBlackBigBorder uiCornerAll").appendTo("body"));return c.mask.show(),c.type==="drag"&&c.dest!==null&&(e=a(c.dest),c.destPosition=[],e.each(function(){var b,d,e,f;return e=a(this),f=e.offset(),d=e.width(),b=e.height(),c.destPosition.push({leftTop:[f.left,f.top],rightBottom:[f.left+d,f.top+b]})})),!0},d=function(a,b,c){var d,e,f,g,h,i,j,k,l;g=b.left,j=b.top,i=g+a.outerWidth,d=j+a.outerHeight,f=!1,e=function(a){return g>a.rightBottom[0]||i<a.leftTop[0]||d<a.leftTop[0]||j>a.rightBottom[1]?!1:!0};for(k=0,l=c.length;k<l;k++){h=c[k];if(e(h)===!0){f=!0;break}}return f},a.fn.draggable=function(a){var c,d;return d=this,c=new b.Draggable(d,a),c.init(d,c.opts)},b.Draggable=function(c){function d(c,d){var e,f;e=this;if(e instanceof b.Draggable)f=a.extend({},b.Draggable.prototype.defaults,d),e.constructor.__super__.constructor.call(e,c,f),f=e.opts,f.event.stop===a.noop&&(f.event.stop=function(a,b){return c.moveToPos({position:b}),null});else return new b.Draggable(c,d)}return i(d,c),d.name="Draggable",d.prototype.defaults={dest:null,originPosition:null,position:null,outerWidth:null,outerHeight:null,destPosition:null,firstCross:!1,type:"drag",widgetKey:null,cross:null},d}(c),a.fn.resizable=function(a){var c,d;return d=this,c=new b.Resizable(d,a),c.init(d,c.opts)},b.Resizable=function(c){function d(c,d){var e,f;f=this;if(f instanceof b.Resizable)e=a.extend({},b.Resizable.prototype.defaults,d),f.constructor.__super__.constructor.call(f,c,e),e=f.opts,e.event.stop===a.noop&&(e.event.stop=function(b,d,f,g){var h,i,j;return e.resizeStop(c)===!1?!1:(g=Math.min(Math.max(e.minHeight,g),e.maxHeight),f=Math.min(Math.max(e.minWidth,f),e.maxWidth),i=0,h=c.width(f).height(g).children(".uiContent"),c.children().each(function(){var b;b=a(this);if(!b.hasClass(!b.hasClass("uiResizable")))return i+=a(this).outerHeight(!0)}),j=h.outerHeight(!0)-h.height(),h.height(g-i-j),null)});else return new b.Resizable(c,d)}return i(d,c),d.name="Resizable",d.prototype.defaults={minWidth:null,minHeight:null,maxWidth:65535,maxHeight:65535,originWidth:0,originHeight:0,type:"resize",outerWidth:null,outerHeight:null,destPosition:null},d}(c)})).call(this);