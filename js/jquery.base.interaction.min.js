(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=window.jQuery,r=window.BASE,i=function(){function e(e,t){var i,s=this;s.jqObj=e,s.opts={},i={disable:!1,getUserMask:null,originMask:!1,stopMouseDownPropagation:!1,start:!1,originClientX:0,originClientY:0,doing:!1,type:null,mask:null,event:{start:n.noop,doing:n.noop,stop:n.noop},maskHTML:'<div class="uiInteractionMask uiInactive uiCornerAll uiBlackBigBorder"></div>'},n.extend(s.opts,i,t),s.opts.widgetKey=r.getRandomKey()}return e.prototype.init=function(){var e,t,r,i,f=this,l=f.jqObj,c=f.opts;return c.type==="resize"?(i=l.find(".uiResizable"),i.length===0&&(l.css(!1)&&l.css("position","relative"),i=n('<div class="uiResizable"></div>').appendTo(l))):c.type==="drag"&&(i=l.find(".uiDraggable"),i.length===0&&(i=l.addClass("uiDraggable"))),e="mousedown."+c.type,i.on(e,function(e){return o(l,c,e),c.type==="resize"?!1:!c.stopMouseDownPropagation}),t="mousemove."+c.widgetKey,r="mouseup."+c.widgetKey,n(document).on(t,function(e){var t,n,r,i,s,o;if(c.start){if(c.mask===null&&u(l,c,e)===!1)return;t=c.mask,c.doing=!0,i=e.clientX-c.originClientX,s=e.clientY-c.originClientY;if(c.type==="resize"){r=c.originWidth+i,n=c.originHeight+s,c.maxWidth!==null&&r>c.maxWidth&&(r=c.maxWidth),c.minWidth!==null&&r<c.minWidth&&(r=c.minWidth),c.maxHeight!==null&&n>c.maxHeight&&(n=c.maxHeight),c.minHeight!==null&&n<c.minHeight&&(n=c.minHeight);if(c.event.doing(l,t,r,n)===!1)return;t.width(r).height(n)}else if(c.type==="drag"){o={left:c.originPosition.left+i,top:c.originPosition.top+s};if(c.event.doing(l,t,o)===!1)return;t.css(o),c.dest!==null&&(a(c,o,c.destPosition)===!0?c.firstCross||(c.cross(l,!0),c.firstCross=!0):c.firstCross&&(c.cross(l,!1),c.firstCross=!1))}return!1}}),n(document).on(r,function(){return s(l,c)}),f},e}(),s=function(e,t){var n,r;if(t.doing===!1)return t.start=!1,null;n=t.mask,t.start=t.doing=!1;if(t.type==="resize"){if(t.event.stop(e,n,n.width(),n.height())===!1)return null}else if(t.type==="drag"){r=n.offset();if(t.event.stop(e,n,r)===!1)return null}return n.remove(),t.mask=null,null},o=function(e,t,r){return t.start=!0,t.event.start(e)===!1||n(r.target).hasClass("uiUserBtn")?(t.start=!1,!1):null},u=function(e,t,r){var i,s,o,u=e.outerHeight(),a=e.outerWidth(),f=e.offset();t.originClientX=r.clientX,t.originClientY=r.clientY,t.outerHeight=u,t.outerWidth=a,t.originWidth=e.width(),t.originHeight=e.height(),t.originPosition=t.position=f;if(n.isFunction(t.getUserMask)){t.mask=t.getUserMask(e);if(t.mask.length===0)return t.mask=null,t.start=!1,!1;t.position=t.originPosition=t.mask.offset()}else t.originMask?t.mask=e.clone().css({position:"absolute",left:f.left,top:f.top}).appendTo("body"):(s=e.css("marginLeft"),o=e.css("marginTop"),t.mask=n(t.maskHTML).width(a).height(u).css({marginLeft:s,marginTop:o,left:f.left,top:f.top}).hide().addClass("uiBlackBigBorder uiCornerAll").appendTo("body"));return t.mask.show(),t.type==="drag"&&t.dest!==null&&(i=n(t.dest),t.destPosition=[],i.each(function(){var e=n(this),r=e.offset(),i=e.width(),s=e.height();return t.destPosition.push({leftTop:[r.left,r.top],rightBottom:[r.left+i,r.top+s]})})),!0},a=function(e,t,n){var r,i,s,o=t.left,u=t.top,a=o+e.outerWidth,f=u+e.outerHeight,l=!1,c=function(e){return o>e.rightBottom[0]||a<e.leftTop[0]||f<e.leftTop[0]||u>e.rightBottom[1]?!1:!0};for(i=0,s=n.length;i<s;i++){r=n[i];if(c(r)===!0){l=!0;break}}return l};n.fn.draggable=function(e){var t=this,n=new r.Draggable(t,e);return n.init(t,n.opts),t},r.Draggable=function(e){function i(e,t){var i,s,o=this;if(!(o instanceof r.Draggable))return new r.Draggable(e,t);i={dest:null,originPosition:null,position:null,outerWidth:null,outerHeight:null,destPosition:null,firstCross:!1,type:"drag",widgetKey:null,cross:null},s=n.extend({},i,t),o.constructor.__super__.constructor.call(o,e,s),s=o.opts,s.event.stop===n.noop&&(s.event.stop=function(t,n){return e.moveToPos({position:n}),null})}return t(i,e),i}(i),n.fn.resizable=function(e){var t=this,n=new r.Resizable(t,e);return n.init(t,n.opts),t},r.Resizable=function(e){function i(e,t){var i,s,o=this;if(!(o instanceof r.Resizable))return new r.Resizable(e,t);i={minWidth:null,minHeight:null,maxWidth:65535,maxHeight:65535,originWidth:0,originHeight:0,type:"resize",outerWidth:null,outerHeight:null,destPosition:null},s=n.extend({},i,t),o.constructor.__super__.constructor.call(o,e,s),s=o.opts,s.event.stop===n.noop&&(s.event.stop=function(t,r,i,o){var u,a,f;return s.resizeStop(e)===!1?!1:(o=Math.min(Math.max(s.minHeight,o),s.maxHeight),i=Math.min(Math.max(s.minWidth,i),s.maxWidth),a=0,u=e.width(i).height(o).children(".uiContent"),e.children().each(function(){var e=n(this);if(!e.hasClass(!e.hasClass("uiResizable")))return a+=n(this).outerHeight(!0)}),f=u.outerHeight(!0)-u.height(),u.height(o-a-f),null)})}return t(i,e),i}(i)}).call(this)