((function(){var a,b,c,d,e,f,g,h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=window.jQuery,b=window.BASE,c=function(){function c(c,d){var e,f;f=this,f.jqObj=c,f.opts={},e={disable:!1,getUserMask:null,originMask:!1,stopMouseDownPropagation:!1,start:!1,originClientX:0,originClientY:0,doing:!1,type:null,mask:null,event:{start:a.noop,doing:a.noop,stop:a.noop},maskHTML:'<div class="uiInteractionMask uiInactive uiCornerAll uiBlackBigBorder"></div>'},a.extend(f.opts,e,d),f.opts.widgetKey=b.getRandomKey()}return c.name="Interaction",c.prototype.init=function(){var b,c,h,i,j,k,l;return b=this,l=b.jqObj,k=b.opts,k.type==="resize"?(j=l.find(".uiResizable"),j.length===0&&(l.css(!1)&&l.css("position","relative"),j=a('<div class="uiResizable"></div>').appendTo(l))):k.type==="drag"&&(j=l.find(".uiDraggable"),j.length===0&&(j=l.addClass("uiDraggable"))),c="mousedown."+k.type,j.on(c,function(a){return g(l,k,a),k.type==="resize"?!1:!k.stopMouseDownPropagation}),h="mousemove."+k.widgetKey,i="mouseup."+k.widgetKey,a(document).on(h,function(a){var b,c,e,g,h,i;if(k.start){if(k.mask===null&&f(l,k,a)===!1)return;b=k.mask,k.doing=!0,g=a.clientX-k.originClientX,h=a.clientY-k.originClientY;if(k.type==="resize"){e=k.originWidth+g,c=k.originHeight+h,k.maxWidth!==null&&e>k.maxWidth&&(e=k.maxWidth),k.minWidth!==null&&e<k.minWidth&&(e=k.minWidth),k.maxHeight!==null&&c>k.maxHeight&&(c=k.maxHeight),k.minHeight!==null&&c<k.minHeight&&(c=k.minHeight);if(k.event.doing(l,b,e,c)===!1)return;b.width(e).height(c)}else if(k.type==="drag"){i={left:k.originPosition.left+g,top:k.originPosition.top+h};if(k.event.doing(l,b,i)===!1)return;b.css(i),k.dest!==null&&(d(k,i,k.destPosition)===!0?k.firstCross||(k.cross(l,!0),k.firstCross=!0):k.firstCross&&(k.cross(l,!1),k.firstCross=!1))}return!1}}),a(document).on(i,function(){return e(l,k)}),b},c}(),e=function(a,b){var c,d;if(b.doing===!1){b.start=!1;return}c=b.mask,b.start=b.doing=!1;if(b.type==="resize"){if(b.event.stop(a,c,c.width(),c.height())===!1)return}else if(b.type==="drag"){d=c.offset();if(b.event.stop(a,c,d)===!1)return}return c.remove(),b.mask=null},g=function(b,c,d){c.start=!0;if(c.event.start(b)===!1||a(d.target).hasClass("uiUserBtn"))return c.start=!1,!1},f=function(b,c,d){var e,f,g,h,i,j;h=b.outerHeight(),j=b.outerWidth(),i=b.offset(),c.originClientX=d.clientX,c.originClientY=d.clientY,c.outerHeight=h,c.outerWidth=j,c.originWidth=b.width(),c.originHeight=b.height(),c.originPosition=c.position=i;if(a.isFunction(c.getUserMask)){c.mask=c.getUserMask(b);if(c.mask.length===0)return c.mask=null,c.start=!1,!1;c.position=c.originPosition=c.mask.offset()}else c.originMask?c.mask=b.clone().css({position:"absolute",left:i.left,top:i.top}).appendTo("body"):(f=b.css("marginLeft"),g=b.css("marginTop"),c.mask=a(c.maskHTML).width(j).height(h).css({marginLeft:f,marginTop:g,left:i.left,top:i.top}).hide().addClass("uiBlackBigBorder uiCornerAll").appendTo("body"));return c.mask.show(),c.type==="drag"&&c.dest!==null&&(e=a(c.dest),c.destPosition=[],e.each(function(){var b,d,e,f;return e=a(this),f=e.offset(),d=e.width(),b=e.height(),c.destPosition.push({leftTop:[f.left,f.top],rightBottom:[f.left+d,f.top+b]})})),!0},d=function(a,b,c){var d,e,f,g,h,i,j,k,l;g=b.left,j=b.top,i=g+a.outerWidth,d=j+a.outerHeight,f=!1,e=function(a){return g>a.rightBottom[0]||i<a.leftTop[0]||d<a.leftTop[0]||j>a.rightBottom[1]?!1:!0};for(k=0,l=c.length;k<l;k++){h=c[k];if(e(h)===!0){f=!0;break}}return f},a.fn.draggable=function(a){var c,d;return d=this,c=new b.Draggable(d,a),c.init(d,c.opts)},b.Draggable=function(c){function d(c,d){var e,f,g;f=this;if(f instanceof b.Draggable)e={dest:null,originPosition:null,position:null,outerWidth:null,outerHeight:null,destPosition:null,firstCross:!1,type:"drag",widgetKey:null,cross:null},g=a.extend({},e,d),f.constructor.__super__.constructor.call(f,c,g),g=f.opts,g.event.stop===a.noop&&(g.event.stop=function(a,b){return c.moveToPos({position:b}),null});else return new b.Draggable(c,d)}return i(d,c),d.name="Draggable",d}(c),a.fn.resizable=function(a){var c,d;return d=this,c=new b.Resizable(d,a),c.init(d,c.opts)},b.Resizable=function(c){function d(c,d){var e,f,g;g=this;if(g instanceof b.Resizable)e={minWidth:null,minHeight:null,maxWidth:65535,maxHeight:65535,originWidth:0,originHeight:0,type:"resize",outerWidth:null,outerHeight:null,destPosition:null},f=a.extend({},e,d),g.constructor.__super__.constructor.call(g,c,f),f=g.opts,f.event.stop===a.noop&&(f.event.stop=function(b,d,e,g){var h,i,j;return f.resizeStop(c)===!1?!1:(g=Math.min(Math.max(f.minHeight,g),f.maxHeight),e=Math.min(Math.max(f.minWidth,e),f.maxWidth),i=0,h=c.width(e).height(g).children(".uiContent"),c.children().each(function(){var b;b=a(this);if(!b.hasClass(!b.hasClass("uiResizable")))return i+=a(this).outerHeight(!0)}),j=h.outerHeight(!0)-h.height(),h.height(g-i-j),null)});else return new b.Resizable(c,d)}return i(d,c),d.name="Resizable",d}(c)})).call(this);