((function(){var a,b,c,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=window.jQuery,b=window.BASE,a.fn.dialog=function(a){var c,d,e;return e=this,c=Array.prototype.slice.call(arguments),c.push(b.Dialog),d=b.createWidgetByJQuery.apply(e,c),d.jqObj!=null&&a!=="widget"?e:d},b.Dialog=function(d){function e(c,d){var e,f,g;f=this;if(f instanceof b.Dialog)e={dialogClass:""+b.defaultBorder+" uiCornerAll "+b.defaultBoxShadow,titleBarClass:b.defaultGradientBG,position:null,zIndex:1e3,draggable:!1,resizable:!1,minStatusWidth:250,modal:!1,buttonSet:null,minHeight:300,maxHeight:700,minWidth:400,maxWidth:1e3,active:!0,minimize:!1,closable:!0,noTitleBar:!1,titleIcon:"",title:"",controlButton:!0,autoOpen:!0,destroyOnClose:!0,closeAnimate:"slideUp",openAnimate:"slideDown",beforeClose:a.noop,close:a.noop,beforeOpen:a.noop,open:a.noop,beforeMin:a.noop,min:a.noop,beforeResume:a.noop,resume:a.noop,dragStart:a.noop,draging:a.noop,dragStop:a.noop,resizeStart:a.noop,resizing:a.noop,resizeStop:a.noop,minStatusHeight:0,originHeight:0,originWidth:0,originPosition:null,overflowStatus:null,controlButtonSetHTML:'<div class="uiDialogButtonSet"><div class="uiUserBtn uiMinBtn uiIcon uiMinButtonIcon"></div><div class="uiUserBtn uiCloseBtn uiIcon uiCloseButtonIcon"></div></div>',titleBarHTML:'<div class="uiTitleBar"><div class="uiTitle"></div></div>',contentHTML:'<div class="uiContent"></div>',resizeHTML:'<div class="uiResizable"></div>',selectList:null},g=a.extend(e,d),f.constructor.__super__.constructor.call(f,c,g),f.init();else return new b.Dialog(c,d)}return g(e,d),e.name="Dialog",e.prototype.init=function(){var a;return a=this,a.createWidget(),c(a,a.jqObj,a.opts),a},e.prototype.title=function(b){var c,d,e,f;return c=this,f=c.jqObj,e=c.opts,d=a(">.uiTitleBar >.uiTitle",f),arguments.length===0?d.text():(e.title=b,d.html(d.html().replace(d.text(),b)))},e.prototype.titleIcon=function(b){var c,d,e,f;return c=this,f=c.jqObj,e=c.opts,arguments.length===0?e.titleIcon:(e.titleIcon!==""&&a(">.uiTitleBar >.uiTitle",f).prepend('<span class="uiTitleIcon" />'),d=a(">.uiTitleBar >.uiTitle >.uiTitleIcon",f).removeClass(e.titleIcon).addClass(b),e.titleIcon=b,c)},e.prototype.content=function(b){var c,d,e,f;return d=this,f=d.jqObj,e=d.opts,c=f.children(".uiContent"),arguments.length===0?c:(c.empty().append(a(b)),d)},e}(b.Widget),c=function(c,f,g){var h,i,j,k,l,m,n,o,p,q;o=""+g.titleBarClass+" uiCornerAll",g.title===""&&(g.title=f.attr("title")||""),g.draggable&&(o+=" uiDraggable"),g.controlButton&&(k=a(g.controlButtonSetHTML),g.minimize||k.children(".uiMinBtn").hide(),g.closable||k.children(".uiCloseBtn").hide()),j=f.children().addClass("uiContent"),g.noTitleBar||(n=a(g.titleBarHTML).addClass(o).append(k).children(".uiTitle").html(g.title).end(),g.titleIcon!==""&&n.children(".uiTitle").prepend(a('<span class="uiTitleIcon" />')).addClass(g.titleIcon),f.prepend(n)),f.addClass("uiDialog uiWidget "+g.dialogClass),g.position!==null&&f.css("zIndex",g.zIndex+1).moveToPos(g.position),g.modal&&(m=a("<div />").addClass("uiMask").appendTo("body"),g.position===null&&f.css("zIndex",g.zIndex+1).moveToPos({position:"center"}),b.msie6&&(g.selectList=a("select:visible").filter(function(){if(a(this).css(!0))return!0}),g.selectList.css("visibility","hidden"),m.height(a(document).height())));if(g.buttonSet!==null){h="<div>",q=g.buttonSet;for(l in q)p=q[l],h+="<div>"+l+"</div>";h+="</div>",i=a(h).buttonSet({click:function(a){return g.buttonSet[a.text()](this)===!1?!1:c.close(f,g,a)}}),i.appendTo(f)}g.resizable&&(f.append(g.resizeHTML),f.css("position")==="static"&&f.css("position","relative")),g.minHeight=Math.min(f.height(),g.minHeight),g.minWidth=Math.min(f.width(),g.minWidth),e(f,g),d(c,f,g);if(!g.autoOpen)return f.hide()},d=function(b,c,d){var e,f,g;f=c.css("position"),c.find(">.uiTitleBar >.uiDialogButtonSet >.uiUserBtn").on("click.uiDialog",function(e){var f,g;g=a(this),g.hasClass("uiMinBtn")?f="min":g.hasClass("uiResumeBtn")?f="resume":g.hasClass("uiCloseBtn")&&(f="close");if(f!=null)return c.is(":animated")?!1:(b[f](c,d,g,e),!1)}),d.draggable&&(e=function(a,b,e){return d.dragStop(c)===!1?!1:c.offset(e)},c.draggable({event:{start:d.dragStart,doing:d.draging,stop:e}}));if(d.resizable)return g=function(b,e,f,g){var h,i,j;return d.resizeStop(c)===!1?!1:(g=Math.min(Math.max(d.minHeight,g),d.maxHeight),f=Math.min(Math.max(d.minWidth,f),d.maxWidth),i=0,h=c.width(f).height(g).children(".uiContent"),c.children().each(function(){var b;b=a(this);if(!b.hasClass(!b.hasClass("uiResizable")))return i+=b.outerHeight(!0)}),j=h.outerHeight(!0-h.height()),h.height(g-i-j))},c.resizable({event:{start:d.resizeStart,doing:d.resizing,stop:g},minHeight:d.minHeight,maxHeight:d.maxHeight,minWidth:d.minWidth,maxWidth:d.maxWidth})},e=function(b,c){var d,e,f,g,h,i,j;return i=0,e=b.children(".uiContent"),b.children().each(function(){var b;b=a(this);if(!b.hasClass(!b.hasClass("uiResizable")))return i+=a(this).outerHeight(!0)}),f=e.outerHeight(!0),j=f-e.height(),g=b.find("img"),h=g.length,h===0&&(d=0,g.each(function(){if(!this.complete)return a(this).load(function(){d++;if(d===h)return e.height(b.height()-i-j)});d++;if(d===h)return e.height(b.height()-i-j)})),e.height(b.height()-i-j),null}})).call(this);