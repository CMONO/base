(function(){var e,t,n,r={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s=window.jQuery,o=window.BASE;s.fn.dialog=function(e){var t,n=this,r=Array.prototype.slice.call(arguments);return r.push(o.Dialog),t=o.createWidgetByJQuery.apply(n,r),t.jqObj!=null&&e!=="widget"?n:t},o.Dialog=function(t){function n(e,t){var n,r,i=this;if(!(i instanceof o.Dialog))return new o.Dialog(e,t);n={dialogClass:""+o.defaultBorder+" uiCornerAll "+o.defaultBoxShadow,titleBarClass:o.defaultGradientBG,position:null,zIndex:1e3,draggable:!1,resizable:!1,minStatusWidth:250,modal:!1,buttonSet:null,minHeight:300,maxHeight:700,minWidth:400,maxWidth:1e3,active:!0,minimize:!1,closable:!0,noTitleBar:!1,titleIcon:"",title:"",controlButton:!0,autoOpen:!0,destroyOnClose:!0,closeAnimate:"slideUp",openAnimate:"slideDown",beforeClose:s.noop,close:s.noop,beforeOpen:s.noop,open:s.noop,beforeMin:s.noop,min:s.noop,beforeResume:s.noop,resume:s.noop,dragStart:s.noop,draging:s.noop,dragStop:s.noop,resizeStart:s.noop,resizing:s.noop,resizeStop:s.noop,minStatusHeight:0,originHeight:0,originWidth:0,originPosition:null,overflowStatus:null,controlButtonSetHTML:'<div class="uiDialogButtonSet"><div class="uiUserBtn uiMinBtn uiIcon uiMinButtonIcon"></div><div class="uiUserBtn uiCloseBtn uiIcon uiCloseButtonIcon"></div></div>',titleBarHTML:'<div class="uiTitleBar"><div class="uiTitle"></div></div>',contentHTML:'<div class="uiContent"></div>',resizeHTML:'<div class="uiResizable"></div>',selectList:null},r=s.extend(n,t),i.constructor.__super__.constructor.call(i,e,r),i.init()}return i(n,t),n.prototype.init=function(){var t=this;return t.createWidget(),e(t,t.jqObj,t.opts),t},n.prototype.title=function(e){var t=this,n=t.jqObj,r=t.opts,i=s(">.uiTitleBar >.uiTitle",n);return arguments.length===0?i.text():(r.title=e,i.html(i.html().replace(i.text(),e)),t)},n.prototype.titleIcon=function(e){var t,n=this,r=n.jqObj,i=n.opts;return arguments.length===0?i.titleIcon:(i.titleIcon!==""&&s(">.uiTitleBar >.uiTitle",r).prepend('<span class="uiTitleIcon" />'),t=s(">.uiTitleBar >.uiTitle >.uiTitleIcon",r).removeClass(i.titleIcon).addClass(e),i.titleIcon=e,n)},n.prototype.content=function(e){var t=this,n=t.jqObj,r=t.opts,i=n.children(".uiContent");return arguments.length===0?i:(i.empty().append(s(e)),t)},n.prototype.close=function(){var e=this,t=e.jqObj,n=e.opts;return n.beforeClose(t)===!1?e:(t[n.closeAnimate](function(){if(n.close(t)===!1)return;if(n.destroyOnClose)return e.destroy()}),e)},n.prototype.open=function(){var e=this,t=e.jqObj,n=e.opts;return n.beforeOpen(t)===!1?e:(t[n.openAnimate](function(){n.open(t)!==!1}),e)},n}(o.Widget),e=function(e,r,i){var u,a,f,l,c,h,p,d,v,m=""+i.titleBarClass+" uiCornerAll";i.title===""&&(i.title=r.attr("title")||""),i.draggable&&(m+=" uiDraggable"),i.controlButton&&(l=s(i.controlButtonSetHTML),i.minimize||l.children(".uiMinBtn").hide(),i.closable||l.children(".uiCloseBtn").hide()),f=r.children().addClass("uiContent"),i.noTitleBar||(p=s(i.titleBarHTML).addClass(m).append(l).children(".uiTitle").html(i.title).end(),i.titleIcon!==""&&p.children(".uiTitle").prepend(s('<span class="uiTitleIcon" />')).addClass(i.titleIcon),r.prepend(p)),r.addClass("uiDialog uiWidget "+i.dialogClass),i.position!==null&&r.css("zIndex",i.zIndex+1).moveToPos(i.position),i.modal&&(h=s("<div />").addClass("uiMask").appendTo("body"),i.position===null&&r.css("zIndex",i.zIndex+1).moveToPos({position:"center"}),o.msie6&&(i.selectList=s("select:visible").filter(function(){if(s(this).css(!0))return!0}),i.selectList.css("visibility","hidden"),h.height(s(document).height())));if(i.buttonSet!==null){u="<div>",v=i.buttonSet;for(c in v)d=v[c],u+="<div>"+c+"</div>";u+="</div>",a=s(u).buttonSet({click:function(t){return i.buttonSet[t.text()](this)===!1?!1:e.close(r,i,t)}}),a.appendTo(r)}return i.resizable&&(r.append(i.resizeHTML),r.css("position")==="static"&&r.css("position","relative")),i.minHeight=Math.min(r.height(),i.minHeight),i.minWidth=Math.min(r.width(),i.minWidth),n(r,i),t(e,r,i),i.autoOpen||r.hide(),null},t=function(e,t,n){var r,i,o=t.css("position");return t.find(">.uiTitleBar >.uiDialogButtonSet >.uiUserBtn").on("click.uiDialog",function(r){var i,o=s(this);o.hasClass("uiMinBtn")?i="min":o.hasClass("uiResumeBtn")?i="resume":o.hasClass("uiCloseBtn")&&(i="close");if(i!=null)return t.is(":animated")?!1:(e[i](t,n,o,r),!1)}),n.draggable&&(r=function(e,r,i){return n.dragStop(t)===!1?!1:t.offset(i)},t.draggable({event:{start:n.dragStart,doing:n.draging,stop:r}})),n.resizable&&(i=function(e,r,i,o){var u,a,f;return n.resizeStop(t)===!1?!1:(o=Math.min(Math.max(n.minHeight,o),n.maxHeight),i=Math.min(Math.max(n.minWidth,i),n.maxWidth),a=0,u=t.width(i).height(o).children(".uiContent"),t.children().each(function(){var e=s(this);if(!e.hasClass(!e.hasClass("uiResizable")))return a+=e.outerHeight(!0)}),f=u.outerHeight(!0-u.height()),u.height(o-a-f))},t.resizable({event:{start:n.resizeStart,doing:n.resizing,stop:i},minHeight:n.minHeight,maxHeight:n.maxHeight,minWidth:n.minWidth,maxWidth:n.maxWidth})),null},n=function(e){var t,n,r,i,o,u=0,a=e.children(".uiContent");return e.children().each(function(){var e=s(this);if(!e.hasClass(!e.hasClass("uiResizable")))return u+=s(this).outerHeight(!0)}),n=a.outerHeight(!0),o=n-a.height(),r=e.find("img"),i=r.length,i===0&&(t=0,r.each(function(){if(!this.complete)return s(this).load(function(){t++;if(t===i)return a.height(e.height()-u-o)});t++;if(t===i)return a.height(e.height()-u-o)})),a.height(e.height()-u-o),null}}).call(this)