((function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=window.jQuery,b=window.BASE,a.fn.dialog=function(a){var c,d,e;return e=this,c=Array.prototype.slice.call(arguments),c.push(b.Dialog),d=b.createWidgetByJQuery.apply(e,c),d.jqObj!=null&&a!=="widget"?e:d},b.Dialog=function(d){function e(c,d){var e,f;e=this;if(e instanceof b.Dialog)f=a.extend({},b.Dialog.prototype.defaults,d),e.constructor.__super__.constructor.call(e,c,f),e.init();else return new b.Dialog(c,d)}return f(e,d),e.name="Dialog",e.prototype.defaults={dialogClass:""+b.defaultBorder+" uiCornerAll "+b.defaultBoxShadow,titleBarClass:b.defaultGradientBG,position:null,zIndex:1e3,draggable:!1,resizable:!1,minStatusWidth:250,modal:!1,buttonSet:null,minHeight:300,maxHeight:700,minWidth:400,maxWidth:1e3,active:!0,minimize:!1,closable:!0,noTitleBar:!1,titleIcon:"",title:"",controlButton:!0,autoOpen:!0,destroyOnClose:!0,closeAnimate:"slideUp",openAnimate:"slideDown",beforeClose:a.noop,close:a.noop,beforeOpen:a.noop,open:a.noop,beforeMin:a.noop,min:a.noop,beforeResume:a.noop,resume:a.noop,dragStart:a.noop,draging:a.noop,dragStop:a.noop,resizeStart:a.noop,resizing:a.noop,resizeStop:a.noop,minStatusHeight:0,originHeight:0,originWidth:0,originPosition:null,overflowStatus:null,controlButtonSetHTML:'<div class="uiDialogButtonSet"><div class="uiUserBtn uiMinBtn uiIcon uiMinButtonIcon"></div><div class="uiUserBtn uiCloseBtn uiIcon uiCloseButtonIcon"></div></div>',titleBarHTML:'<div class="uiTitleBar"><div class="uiTitle"></div></div>',contentHTML:'<div class="uiContent"></div>',resizeHTML:'<div class="uiResizable"></div>',selectList:null},e.prototype.init=function(){var a;return a=this,a.createWidget(),c(a,a.jqObj,a.opts),a},e.prototype.title=function(b){var c,d,e,f;return c=this,f=c.jqObj,e=c.opts,d=a(">.uiTitleBar >.uiTitle",f),arguments.length===0?d.text():(e.title=b,d.html(d.html().replace(d.text(),b)))},e.prototype.titleIcon=function(b){var c,d,e,f;return c=this,f=c.jqObj,e=c.opts,arguments.length===0?e.titleIcon:(e.titleIcon===""&&a(">.uiTitleBar >.uiTitle",f).prepend('<span class="uiTitleIcon" />'),d=a(">.uiTitleBar >.uiTitle >.uiTitleIcon",f).removeClass(e.titleIcon).addClass(b),e.titleIcon=b,c)},e.prototype.content=function(b){var c,d,e,f;return d=this,f=d.jqObj,e=d.opts,c=f.children(".uiContent"),arguments.length===0?c:(c.empty().append(a(b)),d)},e}(b.Widget),c=function(c,e,f){var g,h,i,j,k,l,m,n,o,p;n=""+f.titleBarClass+" uiCornerAll",f.title===""&&(f.title=e.attr("title")),f.draggable&&(n+=" uiDraggable"),f.controlButton&&(j=a(f.controlButtonSetHTML),f.minimize||j.children(".uiMinBtn").hide(),f.closable||j.children(".uiCloseBtn").hide()),i=e.children().addClass("uiContent"),f.noTitleBar||(m=a(f.titleBarHTML).addClass(n).append(j).children(".uiTitle").html(f.title).end(),f.titleIcon!==null&&m.children(".uiTitle").prepend(a('<span class="uiTitleIcon" />')).addClass(f.titleIcon),e.prepend(m)),e.addClass("uiDialog uiWidget "+f.dialogClass),f.position!==null&&e.css("zIndex",f.zIndex+1).moveToPos(f.position),f.modal&&(l=a("<div />").addClass("uiMask").appendTo("body"),f.position===null&&e.css("zIndex",f.zIndex+1).moveToPos({position:"center"}),b.msie6&&(f.selectList=a("select:visible").filter(function(){if(a(this).css(!0))return!0}),f.selectList.css("visibility","hidden"),l.height(a(document).height())));if(f.buttonSet!==null){g="<div>",p=f.buttonSet;for(k in p)o=p[k],g+="<div>"+k+"</div>";g+="</div>",h=a(g).buttonSet({click:function(a){return f.buttonSet[a.text()](this)===!1?!1:c.close(e,f,a)}}),h.appendTo(e)}f.resizable&&(e.append(f.resizeHTML),e.css(!1)&&e.css("position","relative")),f.minHeight=Math.min(e.height(),f.minHeight),f.minWidth=Math.min(e.width(),f.minWidth),setContentHeight(e,f),d(c,e,f);if(!f.autoOpen)return e.hide()},d=function(b,c,d){var e,f,g,h;g=c.css("position"),f=c.off?"on":"bind",c.find(">.uiTitleBar >.uiDialogButtonSet >.uiUserBtn")[f]("click.uiDialog",function(e){var f,g;g=a(this),g.hasClass("uiMinBtn")?f="min":g.hasClass("uiResumeBtn")?f="resume":g.hasClass("uiCloseBtn")&&(f="close");if(f!=null)return c.is(":animated")?!1:(b[f](c,d,g,e),!1)}),d.draggable&&(e=function(a,b){return d.dragStop(c)===!1?!1:c.offset(b)},c.draggable({event:{start:d.dragStart,doing:d.draging,stop:e}}));if(d.resizable)return h=function(b,e,f){var g,h,i;return d.resizeStop(c)===!1?!1:(f=Math.min(Math.max(d.minHeight,f),d.maxHeight),e=Math.min(Math.max(d.minWidth,e),d.maxWidth),h=0,g=c.width(e).height(f).children(".uiContent"),c.children().each(function(){var b;b=a(this);if(!b.hasClass(!b.hasClass("uiResizable")))return h+=b.outerHeight(!0)}),i=g.outerHeight(!0-g.height()),g.height(f-h-i))},c.resizable({event:{start:d.resizeStart,doing:d.resizing,stop:h},minHeight:d.minHeight,maxHeight:d.maxHeight,minWidth:d.minWidth,maxWidth:d.maxWidth})}})).call(this);