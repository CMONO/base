(function(){var e,t,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},i=window.jQuery,s=window.BASE;i.fn.list=function(e){var t,n=this,r=Array.prototype.slice.call(arguments);return r.push(s.List),t=s.createWidgetByJQuery.apply(n,r),t.jqObj!=null&&e!=="widget"?n:t},s.List=function(e){function n(e,t){var n,r,o=this;if(!(o instanceof s.List))return new s.List(e,t);n={title:null,indexKey:"data-key",titleBarClass:s.defaultGradientBG,titleIcon:null,listClass:""+s.defaultBorder+" uiCornerAll "+s.defaultBoxShadow,listItemClass:"uiListItem",listItemHoverClass:"uiLightBlueGradientBG",listItemSelectedClass:"uiBlueGradientBG",click:i.noop,listBackIndexArr:[],showListItem:null,listWidth:0,titleBarHTML:'<div class="uiListTitleBar uiNoSelectText"><span></span><span class="uiListBack uiIcon uiBackIcon">Back</span></div>',moreItemHTML:'<span class="uiListMoreBtn uiArrowRightIcon uiSmallIcon"></span>'},r=i.extend(n,t),o.constructor.__super__.constructor.call(o,e,r),o.init()}return r(n,e),n.prototype.init=function(){var e=this;return e.createWidget(),t(e.jqObj,e.opts),e},n}(s.Widget),t=function(t,n){var r,s,o=n.title||t.attr("title")||"";return t.addClass("uiList uiWidget "+n.listClass).children("div:first").addClass("uiListContent"),o&&(r=i(n.titleBarHTML).addClass(n.titleBarClass).children("span:first").html(o).end(),n.titleIcon&&r.prepend(i('<span class="uiTitleIcon" />').addClass(n.titleIcon)),t.prepend(r)),t.find("li").each(function(){var e=i(this);e.addClass(n.listItemClass);if(e.attr(n.indexKey))return e.addClass("uiListMore").prepend(n.moreItemHTML)}),s=t.height()-i(">.uiListTitleBar",t).outerHeight(!0),n.listWidth=i(">.uiListContent > ul",t).filter(":gt(0)").hide().end().height(s).width(),e(t,n),null},e=function(e,t){return i(">.uiListTitleBar >.uiListBack",e).on("click.uiList",function(){var n,r,s=t.listBackIndexArr.pop();t.listBackIndexArr.length===0&&i(this).fadeOut(t.defaultAnimateDuration),r=i(">.uiListContent > ul",e).filter("["+t.indexKey+'="'+s+'"]');if(r.length===0)return;return n=r.css("marginLeft"),r.css("marginLeft",-t.listWidth).show().animate({marginLeft:0},t.defaultAnimateDuration,function(){return t.showListItem!=null&&t.showListItem.show(),i(this).css("marginLeft",n)})}),i(">.uiListContent > ul",e).on("click.uiList mouseover.uiList mouseout.uiList",function(n){var r,s,o,u,a,f=i(n.target),l=e.prop?"prop":"attr";f[l]("tagName").toUpperCase()!=="LI"&&(f=f.parent());if(event.type==="click"){if(f.hasClass("uiListMore")){u=f.attr(t.indexKey),s=i(this),r=s.attr(t.indexKey),a=s.siblings("["+t.indexKey+'="'+u+'"]').show();if(a.length===0)return;return i(">.uiListTitleBar >.uiListBack",e).fadeIn(t.defaultAnimateDuration),t.listBackIndexArr.push(r),o=s.css("marginLeft"),s.animate({marginLeft:-t.listWidth},t.defaultAnimateDuration,function(){return t.showListItem=a,i(this).hide().css("marginLeft",o)})}return f.removeClass(t.listItemHoverClass).addClass(t.listItemSelectedClass),f.siblings("."+t.listItemSelectedClass).toggleClass(""+t.listItemClass+" "+t.listItemSelectedClass),t.click(e,f,n)}if(event.type==="mouseover"){if(f.hasClass(t.listItemClass))return f.removeClass(t.listItemClass).addClass(t.listItemHoverClass)}else if(event.type==="mouseout"&&f.hasClass(t.listItemHoverClass))return f.removeClass(t.listItemHoverClass).addClass(t.listItemClass)}),null}}).call(this)