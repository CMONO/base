((function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=window.jQuery,b=window.BASE,a.fn.list=function(a){var c,d,e;return e=this,c=Array.prototype.slice.call(arguments),c.push(b.List),d=b.createWidgetByJQuery.apply(e,c),d.jqObj!=null&&a!=="widget"?e:d},b.List=function(c){function e(c,d){var e,f,g;f=this;if(f instanceof b.List)e={title:null,indexKey:"data-key",titleBarClass:b.defaultGradientBG,titleIcon:null,listClass:""+b.defaultBorder+" uiCornerAll "+b.defaultBoxShadow,listItemClass:"uiListItem",listItemHoverClass:"uiLightBlueGradientBG",listItemSelectedClass:"uiBlueGradientBG",click:a.noop,listBackIndexArr:[],showListItem:null,listWidth:0,titleBarHTML:'<div class="uiListTitleBar uiNoSelectText"><span></span><span class="uiListBack uiIcon uiBackIcon">Back</span></div>',moreItemHTML:'<span class="uiListMoreBtn uiArrowRightIcon uiSmallIcon"></span>'},g=a.extend(e,d),f.constructor.__super__.constructor.call(f,c,g),f.init();else return new b.List(c,d)}return f(e,c),e.name="List",e.prototype.init=function(){var a;return a=this,a.createWidget(),d(a.jqObj,a.opts),a},e}(b.Widget),d=function(b,d){var e,f,g;return e=d.title||b.attr("title")||"",b.addClass("uiList uiWidget "+d.listClass).children("div:first").addClass("uiListContent"),e&&(f=a(d.titleBarHTML).addClass(d.titleBarClass).children("span:first").html(e).end(),d.titleIcon&&f.prepend(a('<span class="uiTitleIcon" />').addClass(d.titleIcon)),b.prepend(f)),b.find("li").each(function(){var b;b=a(this),b.addClass(d.listItemClass);if(b.attr(d.indexKey))return b.addClass("uiListMore").prepend(d.moreItemHTML)}),g=b.height()-a(">.uiListTitleBar",b).outerHeight(!0),d.listWidth=a(">.uiListContent > ul",b).filter(":gt(0)").hide().end().height(g).width(),c(b,d)},c=function(b,c){return a(">.uiListTitleBar >.uiListBack",b).on("click.uiList",function(d){var e,f,g;f=c.listBackIndexArr.pop(),c.listBackIndexArr.length===0&&a(this).fadeOut(c.defaultAnimateDuration),g=a(">.uiListContent > ul",b).filter("["+c.indexKey+'="'+f+'"]');if(g.length===0)return;return e=g.css("marginLeft"),g.css("marginLeft",-c.listWidth).show().animate({marginLeft:0},c.defaultAnimateDuration,function(){return c.showListItem!=null&&c.showListItem.show(),a(this).css("marginLeft",e)})}),a(">.uiListContent > ul",b).on("click.uiList mouseover.uiList mouseout.uiList",function(d){var e,f,g,h,i,j,k;k=a(d.target),g=b.prop?"prop":"attr",k[g]("tagName").toUpperCase()!=="LI"&&(k=k.parent());if(event.type==="click"){if(k.hasClass("uiListMore")){i=k.attr(c.indexKey),f=a(this),e=f.attr(c.indexKey),j=f.siblings("["+c.indexKey+'="'+i+'"]').show();if(j.length===0)return;return a(">.uiListTitleBar >.uiListBack",b).fadeIn(c.defaultAnimateDuration),c.listBackIndexArr.push(e),h=a(this).css("marginLeft"),f.animate({marginLeft:-c.listWidth},c.defaultAnimateDuration,function(){return c.showListItem=j,a(this).hide(),h=a(this).css("marginLeft")})}return k.removeClass(c.listItemHoverClass).addClass(c.listItemSelectedClass),k.siblings("."+c.listItemSelectedClass).toggleClass(""+c.listItemClass+" "+c.listItemSelectedClass),c.click(b,k,d)}if(event.type==="mouseover"){if(k.hasClass(c.listItemClass))return k.removeClass(c.listItemClass).addClass(c.listItemHoverClass)}else if(event.type==="mouseout"&&k.hasClass(c.listItemHoverClass))return k.removeClass(c.listItemHoverClass).addClass(c.listItemClass)})}})).call(this);